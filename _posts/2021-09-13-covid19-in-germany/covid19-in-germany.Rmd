---
title: "COVID19 in Germany"
description: |
  Exploring the impact of COVID19 in Germany
author:
  - name: Ibrahim Al-Hindi
date: 09-13-2021
output:
  distill::distill_article:
    self_contained: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

```{r libraries}
library(tidyverse)
library(tidycovid19)
library(plotly)
library(lubridate)
```

```{r data}
covid_data <- download_merged_data(cached = TRUE, silent = TRUE)

ger <- covid_data %>%
  filter(country == "Germany",
         date < "2021-08-05") %>% 
  select(country:recovered, icu_patients, total_vaccinations) %>% 
  mutate(across(icu_patients : total_vaccinations, ~ replace_na(.x, 0)),
         daily_confirmed = c(0, diff(confirmed)),
         daily_deaths = c(0, diff(deaths)),
         daily_recovered = c(0, diff(recovered)),
         daily_vaccinations = c(0, diff(total_vaccinations))) %>% 
  select(date, daily_confirmed, confirmed, daily_deaths, deaths, daily_recovered, recovered, daily_vaccinations, total_vaccinations, icu_patients) %>% 
  rename(acc_confirmed = confirmed,
         acc_deaths = deaths,
         acc_recovered = recovered,
         acc_vaccinations = total_vaccinations)

```

# Data Description

The data is sourced from the **tidycovid19** R package created by **Joachim Gassen** on [Github](https://github.com/joachim-gassen/tidycovid19). The data in this package is collated from various sources and consists of the countries of the world and a multitude of variables that have been combined from the different data sources. For the purposes of this blogpost, the data has been filtered to Germany and the variables maintained are the following:

| **variable**       | **class** | **description**                         |
|:-------------------|:----------|:----------------------------------------|
| date               | date      | Calendar date                           |
| daily_confirmed    | numeric   | Daily increase in Covid-19 cases        |
| acc_confirmed      | numeric   | Accumulated Covid-19 cases              |
| daily_deaths       | numeric   | Daily increase in Covid-19 deaths       |
| acc_deaths         | numeric   | Accumulated Covid-19 deaths             |
| daily_recovered    | numeric   | Daily increase in Covid-19 recoveries   |
| acc_recovered      | numeric   | Accumulated Covid-19 recoveries         |
| daily_vaccinations | numeric   | Daily increase in Covid-19 vaccinations |
| acc_vaccinations   | numeric   | Accumulated Covid-19 vaccinations       |
| icu_patients       | numeric   | number of patients in ICU               |

# COVID19 Daily Cases Trend

```{r}
ger %>% 
  ggplot(aes(date, daily_confirmed)) + 
  geom_col(fill = "darkgrey", colour = "darkgrey") +
  geom_col(
    data = filter(ger, (date > "2020-10-15" & date < "2021-02-10") | (date > "2021-03-01" & date < "2021-05-20")),
    color = "#33C4FF", fill = "#33C4FF") +
  labs(x = "Date",
       y = "Daily Cases",
       title = "Germany experienced two major waves of COVID19:\nthe first was between October 2020 and February 2021,\nthe second was between March and May 2021") +
  scale_x_date(breaks = seq.Date(as.Date("2020-03-01"), as.Date("2021-08-01"), by = "3 months"),
               date_labels = "%Y-%m",
               expand = c(0,0)) +
  scale_y_continuous(labels = scales::label_comma(),
                     expand = c(0,0),
                     limits = c(0,50000)) +
  theme(plot.margin = margin(r = 50),
        plot.background = element_rect(fill = "white"),
        panel.background = element_rect(fill = "white"),
        panel.grid.major.y = element_line(color = "gold", linetype = "dashed"),
        text = element_text(colour = "brown"),
        axis.text = element_text(colour = "black"),
        plot.title.position = "plot",
        plot.title = element_text(margin = margin(b = 20)))

```

The figure shows that Germany experienced one minor wave in early 2020 and two major waves. The first major wave was between October 2020 and Febraury 2021, and the major second wave was between March and May 2021. The peak of the first wave was 49,044 cases per day, while the peak of the second wave was 31,721 cases per day.


# COVID19 Daily Vaccinations Trend

```{r}
ger %>% filter(date > "2020-12-26") %>% 
  ggplot(aes(date, daily_vaccinations)) + 
  geom_col(fill = "darkgrey", color = "darkgrey") +
  geom_col(
    data = filter(ger, date > "2021-04-06" ), fill = "#33C4FF", colour = "#33C4FF") +
  labs(x = "Date",
       y = "Daily Vaccinations",
       title = "Germany began vaccinating at the end of 2020\nand numbers ramped up by early April 2021") +
  scale_x_date(limits = c(as.Date("2020-12-01"), as.Date("2021-08-10")),
               breaks = seq.Date(as.Date("2020-12-01"), as.Date("2021-08-10"), by = "2 months"),
               date_labels = "%Y-%m",
               expand = c(0,0)) +
  scale_y_continuous(limits = c(0, 1500000),
                     breaks = seq(250000, 1500000, 250000),
                     labels = scales::label_comma(),
                     expand = c(0,0)) +
  theme(plot.margin = margin(r = 50),
        plot.background = element_rect(fill = "white"),
        panel.background = element_rect(fill = "white"),
        panel.grid.major.y = element_line(color = "gold", linetype = "dashed"),
        text = element_text(colour = "brown"),
        axis.text = element_text(colour = "black"),
        plot.title.position = "plot",
        plot.title = element_text(margin = margin(b = 20)),
        axis.line.x = element_line(colour = "darkgrey"))
```

The graph shows that Germany ramped it its vaccination efforts starting in early April 2021 with a peak of 1,427,070 vaccinations administered on June 9, 2021. As per [Our World In Data](https://ourworldindata.org/covid-vaccinations?country=OWID_WRL#citation), Germany's vaccination rate currently stands at 62.3%.



```{r}
ger %>% 
  ggplot(aes(date, icu_patients)) + 
  geom_area()
```
